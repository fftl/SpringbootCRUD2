<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta charset="UTF-8">
    <title>디테일</title>
</head>
<body>
<div>게시글 조회입니다.</div>
<form action="#" th:action="@{/updateBoard}" th:object="${boardDto}" method="post">
    <input type="hidden" th:field="${boardDto.boardId}"/>
    <div><label> title : <input id="title" type="text" th:field="${boardDto.title}"/></label></div>
    <div><label> nickName : <span th:text="${boardDto.nickName}"></span></label></div>
    <div><label> content : <textarea input id="content" th:field="${boardDto.content}"/></label></div>
    <button id="updateButton" style="display : none;" type="submit">작성완료</button>
    <a href="/goBoard">취소</a>
</form>
<script th:inline="javascript">
    window.onload = function (){
        var user = [[${boardDto.userId}]];       //작성자 userId 가져옴!!
        var writer = [[${session.user.userId}]]; //세션(로그인한 userId)의 userId 가져옴!!

        if( user == writer ){
            console.log("작성자 입니다.");
            document.getElementById("title").readOnly = false;
            document.getElementById("content").readOnly = false;
            document.getElementById("updateButton").style.display = "inline-block";
        } else {
            console.log("작성자가 아닙니다.");
            document.getElementById("title").readOnly = true;
            document.getElementById("content").readOnly = true;
        }

    }
</script>
</body>
</html>